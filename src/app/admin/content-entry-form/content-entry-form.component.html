<form [formGroup]="entryForm"
      novalidate
      (ngSubmit)="saveEntry()">
  <mat-card class="shipping-card">
    <mat-card-header>
      <mat-card-title>
        Editing {{ (contentType)?.title }}
      </mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <div class="row">
        <div class="col">
          <mat-form-field class="full-width">
            <input matInput
                   placeholder="Title"
                   formControlName="title">
            <mat-error *ngIf="entryForm.controls['urlPath'].hasError('required')">
              Title is <strong>required</strong>
            </mat-error>
          </mat-form-field>
        </div>
      </div>
      <div class="row">
        <div class="col">
          <mat-form-field class="full-width">
            <input matInput
                   placeholder="Slug"
                   formControlName="urlPath">
            <mat-hint>https://{{ domain$ | async }}/{{ (contentType)?.slug }}/{{ entryForm.value.urlPath }}</mat-hint>
            <mat-error *ngIf="entryForm.controls['urlPath'].hasError('required')">
              URL slug is <strong>required</strong>
            </mat-error>
          </mat-form-field>
        </div>
        <div class="col">
          <mat-form-field class="full-width">
            <mat-select formControlName="status"
                        placeholder="Status">
              <mat-option *ngFor="let statusOption of statusOptions"
                          value="{{statusOption.value}}">{{statusOption.title}}</mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
    </mat-card-content>

    <mat-card-header>
      <mat-card-title>
        {{ (contentType)?.title }} content
      </mat-card-title>
    </mat-card-header>
    <mat-card-content *ngIf="isFormFieldDataLoaded">
      <div formGroupName="dataForm">
        <div class="row"
             *ngFor="let field of contentType.fields">
          <div class="col"
               [ngSwitch]="field.type">

            <!-- If input type is just simple line of text -->
            <mat-form-field class="full-width"
                            *ngSwitchCase="'input-text'">
              <input matInput
                     placeholder="{{field.title}}"
                     formControlName="{{field.key}}">
              <mat-error *ngIf="dataForm.controls[field.key].hasError('required')">
                {{ field.title }} is <strong>required</strong>
              </mat-error>
            </mat-form-field>

            <!-- Input plain text in large text area  -->
            <mat-form-field class="full-width"
                            *ngSwitchCase="'textbox-plain'">

              <textarea matInput
                        placeholder="{{field.title}}"
                        formControlName="{{field.key}}"></textarea>

              <mat-error *ngIf="dataForm.controls[field.key].hasError('required')">
                {{ field.title }} is <strong>required</strong>
              </mat-error>
            </mat-form-field>

            <!-- Input rich formatted text in WYSIWYG editor -->
            <mat-form-field class="full-width"
                            *ngSwitchCase="'textbox-rich'">

              <app-mat-form-ckeditor matInput
                                     placeholder="{{field.title}}"
                                     formControlName="{{field.key}}"></app-mat-form-ckeditor>

              <mat-error *ngIf="dataForm.controls[field.key].hasError('required')">
                {{ field.title }} is <strong>required</strong>
              </mat-error>
            </mat-form-field>


            <!-- Use radio button selection -->
            <mat-radio-group *ngSwitchCase="'radio-buttons'"
                             formControlName="{{field.key}}">
              <mat-radio-button *ngFor="let opt of field.options"
                                value="{{option.key}}">{{option.value}}</mat-radio-button>
            </mat-radio-group>
          </div>
        </div>
      </div>
      <ckeditor [(ngModel)]="model.editorData" [editor]="Editor" [ngModelOptions]="{standalone: true}"></ckeditor>
    </mat-card-content>

    <mat-card-actions>
      <button mat-raised-button
              color="warning"
              (click)="cancelEditing()">Cancel</button>
      <button mat-raised-button
              color="primary"
              type="submit"
              [disabled]="entryForm.pristine">Save</button>

    </mat-card-actions>
  </mat-card>
</form>
